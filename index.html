<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Suzanne O'Shea — Virtual Exhibition</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400&display=swap"
    rel="stylesheet">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400&family=Manrope:wght@200;300;400&display=swap"
    rel="stylesheet">
    
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"
    integrity="sha512-..."
    crossorigin="anonymous"
    referrerpolicy="no-referrer"></script>

  <meta property="og:title" content="You're Invited" />
  <meta property="og:description" content="Virtual Exhibition" />
  <meta property="og:url" content="https://sean.soshea.art/" />
  <meta property="og:image" content="https://sean.soshea.art/assets/images/thumbnail.png" />
  <meta property="og:image:url" content="https://sean.soshea.art/assets/images/thumbnail.png" />
  <meta property="og:image:secure_url" content="https://sean.soshea.art/assets/images/thumbnail.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="Suzanne O'Shea exhibition preview" />
  <meta property="og:site_name" content="Suzanne O'Shea — Virtual Exhibition" />
  <meta property="og:type" content="website" />
  <link rel="canonical" href="https://sean.soshea.art/" />
  <link rel="apple-touch-icon" href="https://sean.soshea.art/assets/images/thumbnail.png" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="You're Invited" />
  <meta name="twitter:description" content="Virtual Exhibition" />
  <meta name="twitter:image" content="https://sean.soshea.art/assets/images/thumbnail.png" />
  <meta name="twitter:image:alt" content="Suzanne O'Shea exhibition preview" />
  <link rel="image_src" href="https://sean.soshea.art/assets/images/thumbnail.png" />

  <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">

  <style>
    :root {
      --bg-dark: #000000;
      --text-light: #ffffff;
      --spotlight-size: 60vmax;
    }

    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    html, body {
      width: 100%;
      height: 100%;
      background-color: var(--bg-dark);
      color: var(--text-light);
      font-family: 'Manrope', sans-serif;
      overflow: hidden;
      touch-action: none;
      cursor: default;
    }

    .bg-layer {
      position: fixed;
      inset: 0;
      z-index: -2;
      background:
        radial-gradient(
          circle at center,
          rgba(255,255,255,0.01),
          rgba(0,0,0,0) 70%
        ),
        linear-gradient(45deg, #090909, #070707);
      background-size: cover;
      background-repeat: no-repeat;
    }

    .content {
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .watermark {
      position: fixed;
      top: 1rem;
      right: 2rem;
      font-weight: 300;
      font-size: 0.8rem;
      letter-spacing: 0.2em;
      opacity: 0.08;
      pointer-events: none;
    }

    .shh-intro {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1500;
      font-family: 'Inter', sans-serif;
      font-weight: 200;
      font-style: italic;
      letter-spacing: 0.08em;
      font-size: clamp(2rem, 7vw, 5rem);
      color: #e6e6e6;
      opacity: 0;
      pointer-events: none;
      text-shadow: 0 2px 24px rgba(255, 255, 255, 0.15);
    }

    main.hero {
      position: relative;
      opacity: 0;
      text-align: center;
      perspective: 800px;
      padding-bottom: 40px;
    }

    .hero h1 {
      font-family: 'Inter', sans-serif;
      font-weight: 200;
      letter-spacing: 0.02em;
      font-size: clamp(2.5rem, 6vw, 4.5rem);
      margin: 0;
      color: #ffffff;
      line-height: 1.1;
    }

    .virtual-exhibition {
      font-family: 'Manrope', sans-serif;
      font-weight: 200;
      font-size: clamp(0.8rem, 2vw, 1.2rem);
      letter-spacing: 0.3em;
      text-transform: uppercase;
      margin-top: 2rem;
      color: #b4b4b4;
      opacity: 0;
    }

    .artist-name {
      font-family: 'Manrope', sans-serif;
      font-weight: 200;
      font-size: clamp(0.8rem, 2vw, 1.2rem);
      letter-spacing: 0.3em;
      text-transform: uppercase;
      margin-top: 0.8rem;
      color: #b4b4b4;
      opacity: 0;
    }

    .enter-exhibit-btn {
      font-family: 'Inter', sans-serif;
      font-weight: 200;
      letter-spacing: 0.12em;
      display: inline-block;
      margin-top: 2.5rem;
      background-color: #0d0d0d;
      color: #ececec;
      border: 1px solid #afafaf;
      padding: 1rem 2.5rem;
      text-transform: uppercase;
      border-radius: 2px;
      cursor: pointer;
      font-size: 0.85rem;
      opacity: 0;
      transition: all 0.4s ease;
      backdrop-filter: blur(5px);
      position: relative;
      overflow: hidden;
    }

    .enter-exhibit-btn:hover {
      background-color: #171717;
      border-color: #afafaf;
      transform: translateY(-1px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .enter-exhibit-btn:active {
      transform: translateY(0);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .gallery-screen {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, calc(100vh + 50%));
      opacity: 0;
      text-align: center;
      pointer-events: none;
      width: 100%;
      height: 100vh;
      background-color: #000000;

      z-index: 2000;

      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      transition: opacity 0.8s ease;
    }

    .gallery-screen .main-nav {
      display: none;
    }

    .swipe-hint {
      position: fixed;
      top: 1rem;
      left: 50%;
      transform: translateX(-50%);
      color: rgba(255, 255, 255, 0.6);
      font-size: 0.8rem;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 1001;
    }

    .tap-indicator {
      position: fixed;
      top: 75%;
      width: 30px;
      height: 30px;
      border: 2px solid rgba(255, 255, 255, 0.5);
      border-radius: 50%;
      transform: translateY(-50%);
      opacity: 0;
      pointer-events: none;
    }

    .tap-indicator.left {
      left: 1rem;
    }

    .tap-indicator.right {
      right: 1rem;
    }

    .tap-indicator.show {
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.2; }
      50% { opacity: 0.6; }
    }

    .slideshow-nav {
      position: fixed;
      bottom: 1rem;
      left: 0;
      right: 0;
      padding: 0.5rem;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
      margin: 0;
      z-index: 1000;
    }

    .btn-prev,
    .btn-next {
      display: none;
      background: #171717;
      color: #afafaf;
      border: 1px solid #36383a;
      padding: 0.5rem 1rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
      border-radius: 4px;
      text-transform: uppercase;
      font-size: 0.7rem;
      line-height: 1;
      align-items: center;
      justify-content: center;
      min-height: 2.2rem;
      font-family: 'Inter', sans-serif; 
      font-weight: 300;
    }

    .btn-prev:hover,
    .btn-next:hover {
      background-color: #0d0d0d;
      border-color: #171717;
      transform: translateY(-1px);
    }

    .btn-prev:active,
    .btn-next:active {
      transform: translateY(0);
    }

    @media (min-width: 768px) {
      .gallery-screen {
        padding: 2rem;
      }

      .slide img {
        max-height: 60vh;
      }

      .slideshow-nav {
        position: static;
        background: none;
        backdrop-filter: none;
        margin-top: 1.5rem;
      }

      .swipe-hint {
        display: none;
      }

      .btn-close-gallery {
        display: block;
      }
    }
    
    .slideshow {
      max-width: 800px;
      width: 90%;
      max-height: 85vh;
      overflow: hidden;
      position: relative;
      padding-bottom: 2rem;

      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    .slide {
      display: none;
      text-align: center;
      flex-direction: column;
      opacity: 0;
      transition: transform 0.3s ease, opacity 0.3s ease;
      width: 100%;
      min-height: 100%;
    }

    .slide.active {
      display: flex;
      opacity: 1;
      transform: translateX(0);
    }

    .slide.next {
      transform: translateX(100%);
    }

    .slide.prev {
      transform: translateX(-100%);
    }

    .slide img {
      max-width: 100%;
      max-height: 50vh;
      width: auto;
      object-fit: contain;
      border-radius: 8px;
      box-shadow: 0 8px 20px #0d0d0d;
      margin-bottom: 1rem;
    }

    .slide-info {
      max-width: 700px;
      margin: 0 auto;
      text-align: center;
      padding: 1rem;
      padding-bottom: 60px;
      display: flex;
      flex-direction: column;
      overflow: visible;
      height: auto;
    }

    .art-title {
      font-size: clamp(1.2rem, 4vw, 1.6rem);
      font-weight: 300;
      margin-bottom: 0.2rem;
      color: #ffffff;
      flex-shrink: 0;
    }

    .artist {
      font-style: italic;
      color: #afafaf;
      margin-bottom: 1rem;
      font-size: clamp(0.9rem, 3vw, 1rem);
      flex-shrink: 0;
    }

    .art-description {
      font-size: clamp(0.7rem, 2.5vw, 0.7rem);
      line-height: 1.6;
      color: #9b9b9b;
      margin-bottom: 0.75rem;
      padding: 0 1rem;
      max-height: 100px;
      overflow-y: auto;
      padding-right: 1.5rem; 
      min-height: 0;
      flex: 1;

      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    .art-details {
      flex-shrink: 0;
      margin-top: auto;
    }

    .art-dimensions,
    .art-medium {
      font-size: clamp(0.7rem, 1.8vw, 0.8rem);
      margin-top: 0.3rem;
      color: #676767;
      flex-shrink: 0;
    }
    .play-audio {
      background: transparent;
      border: none;
      color: #afafaf;
      font-size: 1.2rem;
      cursor: pointer;
      padding: 0.4rem;
      margin-top: 0.45rem;
      opacity: 1;
      font-variant-emoji: text;
      webkit-font-feature-settings: "liga" off;
      font-feature-settings: "liga" off;
    }
    .play-audio:hover,
    .play-audio:focus {
      opacity: 1;
    }


    .art-description::-webkit-scrollbar {
      display: none;
    }

    @media (min-width: 768px) {
      .slide img {
        max-height: 60vh;
        margin-bottom: 2rem;
      }

      .slide-info {
        padding: 2rem;
      }

      .art-description {
        padding: 0 2rem;
        font-size: clamp(0.8rem, 2.7vw, 0.8rem);
      }
    }

    .slideshow-nav {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
      justify-content: center;
    }

    .btn-prev:hover,
    .btn-next:hover {
      background-color: #333;
    }

    .btn-close-gallery {
      position: absolute;
      top: 40px;
      right: 40px;
      background: #171717;
      color: #afafaf;
      border: 1px solid #36383a;
      padding: 0.5rem 1rem;
      cursor: pointer;
      border-radius: 4px;
      text-transform: none;
      font-size: 0.9rem;
      transition: background-color 0.3s ease;
      font-family: 'Inter', sans-serif; 
      font-weight: 300;
    }

    .btn-close-gallery:hover {
      background-color: #333;
    }

    .gallery-screen::after {
      content: '';
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 60px;
      background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.5));
      z-index: 1002;
    }

    @media (min-width: 768px) {
      .btn-prev,
      .btn-next {
        display: inline-flex;
      }
    }

    @media (max-width: 768px) {
      .btn-close-gallery {
        display: none !important;
      }
    }

    .footer {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 0.7rem;
      color: #afafaf;
      text-align: center;
      pointer-events: none;
      z-index: 3000;
      width: 100%;
      padding: 10px;
    }
    .footer a {
      color: #676767;
      text-decoration: none;
    }
    .footer a:hover {
      text-decoration: underline;
    }

    .main-nav {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      padding: 2rem;
      z-index: 1000;
      display: flex;
      justify-content: center;
      background: linear-gradient(to bottom, rgba(8,8,8,0.8), transparent);
      backdrop-filter: blur(10px);
    }

    .nav-links {
      display: flex;
      gap: 2rem;
    }

    .nav-link {
      color: var(--text-light);
      text-decoration: none;
      font-size: 0.9rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      opacity: 0.7;
      transition: all 0.3s ease;
      position: relative;
    }

    .nav-link::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 0;
      width: 0;
      height: 1px;
      background: var(--text-light);
      transition: width 0.3s ease;
    }

    .nav-link:hover {
      opacity: 1;
    }

    .nav-link:hover::after {
      width: 100%;
    }

    .nav-link.active {
      opacity: 1;
    }

    .nav-link.active::after {
      width: 100%;
    }

    .zoom-container {
      overflow: hidden;
      touch-action: pan-x pan-y pinch-zoom;
      position: relative;
      width: 100%;
      height: 100%;
    }

    .zoom-container img {
      transition: transform 0.3s ease;
      transform-origin: center center;
    }

    .slide.full-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 3000;
      background: #000000;
      padding: 0;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .slide.full-screen .zoom-container {
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: visible;
      position: relative;
    }

    .slide.full-screen img {
      max-width: 90vw;
      max-height: 85vh;
      width: auto;
      height: auto;
      object-fit: contain;
      margin: 0;
      box-shadow: 0 0 40px rgba(0, 0, 0, 0.3);
      border-radius: 4px;
    }

    .slide.full-screen .slide-info {
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      top: 50%;
    }

    .full-screen-active {
      overflow: hidden;
    }

    img {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-user-drag: none;
      -khtml-user-drag: none;
      -moz-user-drag: none;
      -o-user-drag: none;
      pointer-events: auto !important;
    }

    .zoom-container,
    .slide.full-screen {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    .slide.full-screen img {
      -webkit-touch-callout: none;
    }

    .slide.full-screen::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: radial-gradient(circle at center, rgba(0,0,0,0.4), rgba(0,0,0,0.8) 70%);
      z-index: -1;
      opacity: 0;
      animation: fadeIn 0.5s forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .slide.full-screen .zoom-container::after {
      content: '';
      position: absolute;
      top: -20px;
      left: 50%;
      transform: translateX(-50%);
      width: 40px;
      height: 4px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 2px;
      opacity: 0;
      animation: fadeIn 0.5s 0.3s forwards;
    }

    

  </style>
</head>
<body>

<nav class="main-nav">
  <div class="nav-links">
    <a href="https://sean.soshea.art/" class="nav-link active">Gallery</a>
    <a href="https://sean.soshea.art/about" class="nav-link">About</a>
  </div>
</nav>

<div class="bg-layer"></div>

<div class="content">
  <div class="watermark">SO</div>

  <div class="shh-intro" id="shhIntro" aria-hidden="true">Shh...</div>

  <main class="hero">
    <div class="hero-spotlight"></div>
    <h1>You're Invited</h1>
    <div class="virtual-exhibition">Private Exhibition</div>
    <div class="artist-name">Suzanne O'Shea</div>
    <button class="enter-exhibit-btn" id="enterExhibitBtn" type="button">
        Preview
    </button>
  </main>
</div>

<div class="gallery-screen" id="galleryScreen">
  <button class="btn-close-gallery" id="closeGalleryBtn" type="button">
    Close
  </button>
  <div class="tap-indicator left" aria-hidden="true"></div>
  <div class="tap-indicator right" aria-hidden="true"></div>

  <div class="slideshow" id="slideshow">
    <div class="slide active">
      <div class="zoom-container">
        <img loading="lazy" src="assets/images/hauntedbyyou.jpeg" alt="Haunted By You"/>
        </div>
        <div class="slide-info">
          <h2 class="art-title">Haunted By You</h2>
          <p class="artist">by Suzanne O'Shea</p>
          <p class="art-description">
            Red doesn’t sit behind her; it breathes through her. She stands inside a 
            storm that knows her name, learning how to keep a pulse that once answered to someone else. 
            The eyes do not accuse; they outlast.
          </p>
          <div class="art-details">
            <p class="art-dimensions">24" x 20"</p>
            <p class="art-medium">Mixed Media</p>
          </div>
          <button class="play-audio" data-src="assets/audio/haunted.mp3" aria-label="Play audio">
            <svg width="18" height="18" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="24" cy="24" r="22" stroke="black" stroke-width="2" fill="white"/>
              <polygon points="18,14 34,24 18,34" fill="black"/>
            </svg>
          </button>
        </div>
      </div>

      <div class="slide">
        <div class="zoom-container">
        <img loading="lazy" src="assets/images/witness.jpeg" alt="Witness"/>
        </div>
        <div class="slide-info">
          <h2 class="art-title">Witness</h2>
          <p class="artist">by Suzanne O'Shea</p>
          <p class="art-description">
            A solemn figure stands amidst chaos, her gaze steady - a silent
            observer bearing quiet testimony to unseen stories. 
          </p>
          <div class="art-details">
            <p class="art-dimensions">24" x 20"</p>
            <p class="art-medium">Mixed Media on Canvas</p>
          </div>
          <button class="play-audio" data-src="assets/audio/witness.mp3" aria-label="Play audio">
            <svg width="18" height="18" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="24" cy="24" r="22" stroke="black" stroke-width="2" fill="white"/>
              <polygon points="18,14 34,24 18,34" fill="black"/>
            </svg>
          </button>
        </div>
      </div>

    <div class="slide">
      <div class="zoom-container">
      <img loading="lazy" src="assets/images/wildwhisper.jpg" alt="Wild Whisper"/>
      </div>
      <div class="slide-info">
        <h2 class="art-title">Wild Whisper</h2>
        <p class="artist">by Suzanne O'Shea</p>
        <p class="art-description">
          A spirit of nature emerges in soft defiance - adorned with botanical
          echoes and golden traces, she embodies a quiet power rooted in the wild. 
        </p>
        <div class="art-details">
          <p class="art-dimensions">24" x 20"</p>
          <p class="art-medium">Mixed Media on Canvas</p>
        </div>
        <button class="play-audio" data-src="assets/audio/wild-whisper.mp3" aria-label="Play audio">
          <svg width="18" height="18" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="24" cy="24" r="22" stroke="black" stroke-width="2" fill="white"/>
            <polygon points="18,14 34,24 18,34" fill="black"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="slide">
      <div class="zoom-container">
      <img loading="lazy" src="assets/images/unfinishedgoodbye.jpeg" alt="Unfinished Goodbyes"/>
      </div>
      <div class="slide-info">
        <h2 class="art-title">Unfinished Goodbyes</h2>
        <p class="artist">by Suzanne O'Shea</p>
        <p class="art-description">
          Look long enough and his outline dissolves into memory, look longer and she 
          learns to breathe without him. The roses, rubbed thin with summer, hold the last warmth left between them.
          The canvas keeps two clocks: one for staying, one for leaving - and they refuse to strike together.
        </p>
        <div class="art-details">
          <p class="art-dimensions">30" x 24"</p>
          <p class="art-medium">Mixed Media</p>
        </div>
        <button class="play-audio" data-src="assets/audio/unfin-goodbye.mp3" aria-label="Play audio">
          <svg width="18" height="18" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="24" cy="24" r="22" stroke="black" stroke-width="2" fill="white"/>
            <polygon points="18,14 34,24 18,34" fill="black"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="slide">
      <div class="zoom-container">
      <img loading="lazy" src="assets/images/blackheaddress.jpeg" alt="Quiet Uprising"/>
      </div>
      <div class="slide-info">
        <h2 class="art-title">Quiet Uprising</h2>
        <p class="artist">by Suzanne O'Shea</p>
        <p class="art-description">
          Lace at the throat, a quiet flame at the lips; the storm gathers softly behind her, 
          and still she does not blink. Her gaze is the calm clause that ends an argument, the 
          part of a heart that will not be negotiated. In a world rehearsing submission, she 
          remembers the unteachable art of no.
        </p>
        <div class="art-details">
          <p class="art-dimensions">24" x 20"</p>
          <p class="art-medium">Mixed Media</p>
        </div>
        <button class="play-audio" data-src="assets/audio/quiet-uprising.mp3" aria-label="Play audio">
          <svg width="18" height="18" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="24" cy="24" r="22" stroke="black" stroke-width="2" fill="white"/>
            <polygon points="18,14 34,24 18,34" fill="black"/>
          </svg>
        </button>
      </div>
    </div>

  <div class="slideshow-nav">
    <button id="prevBtn" class="btn-prev" type="button">Prev</button>
    <button id="nextBtn" class="btn-next" type="button">Next</button>
  </div>
</div>

<div class="footer">
  © 2025 Suzanne O'Shea
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const hero = document.querySelector('.hero');
  const heroSpotlight = document.querySelector('.hero-spotlight');
  const subHeading = document.querySelector('.virtual-exhibition');
  const artistLine = document.querySelector('.artist-name');
  const galleryScreen = document.getElementById('galleryScreen');
  const closeGalleryBtn = document.getElementById('closeGalleryBtn');

  const shhIntro = document.getElementById('shhIntro');
  let deepLinked = false;

  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const slides = document.querySelectorAll('.slide');
  const tapIndicators = document.querySelectorAll('.tap-indicator');
  let indicatorsShown = false;
  let inactivityTimer;
  let currentSlide = 0;
  showSlide(currentSlide);

  // Deep-link handling (?art=slug)
  (function handleDeepLink() {
    const params = new URLSearchParams(window.location.search);
    const artSlug = params.get('art');
    if (!artSlug) return;

    let targetIndex = -1;
    slides.forEach((slide, i) => {
      const titleEl = slide.querySelector('.art-title');
      const title = titleEl ? titleEl.textContent.trim() : '';
      if (slugify(title) === artSlug) {
        targetIndex = i;
      }
    });

    if (targetIndex >= 0) {
      currentSlide = targetIndex;
      showSlide(currentSlide);

      // Open gallery immediately
      gsap.set(hero, { y: -window.innerHeight * 0.5, opacity: 0 });
      gsap.set(galleryScreen, { y: '-50%', opacity: 1 });
      galleryScreen.style.pointerEvents = 'auto';
      const mn = document.querySelector('.main-nav');
      if (mn) gsap.set(mn, { opacity: 0 });
      startIndicatorTimer();
      deepLinked = true;
    }
  })();

  function hideTapIndicators() {
    tapIndicators.forEach(ind => ind.classList.remove('show'));
    clearTimeout(inactivityTimer);
    indicatorsShown = true;
  }

  function startIndicatorTimer() {
    if (indicatorsShown || window.innerWidth >= 768) return;
    clearTimeout(inactivityTimer);
    inactivityTimer = setTimeout(() => {
      tapIndicators.forEach(ind => ind.classList.add('show'));
      indicatorsShown = true;
    }, 5000);
  }

  const audio = new Audio();
  let currentAudioButton = null;

  function handleAudioToggle(btn) {
    const clickedSrc = btn.getAttribute('data-src');

    if (currentAudioButton === btn) {
      if (audio.paused) {
        audio.play();
        btn.innerHTML = `<svg width="18" height="18" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="24" cy="24" r="22" stroke="black" stroke-width="2" fill="white"/>
            <rect x="16" y="14" width="4" height="20" rx="1" fill="black"/>
            <rect x="28" y="14" width="4" height="20" rx="1" fill="black"/>
          </svg>`;
      } else {
        audio.pause();
        btn.innerHTML = `<svg width="18" height="18" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="24" cy="24" r="22" stroke="black" stroke-width="2" fill="white"/>
            <polygon points="18,14 34,24 18,34" fill="black"/>
          </svg>`;
      }
    } else {
      if (currentAudioButton) {
        if (!audio.paused) {
          audio.pause();
        }
        currentAudioButton.innerHTML = `<svg width="18" height="18" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="24" cy="24" r="22" stroke="black" stroke-width="2" fill="white"/>
            <polygon points="18,14 34,24 18,34" fill="black"/>
          </svg>`;
      }

      audio.src = clickedSrc;
      audio.play();
      btn.innerHTML = `<svg width="18" height="18" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="24" cy="24" r="22" stroke="black" stroke-width="2" fill="white"/>
            <rect x="16" y="14" width="4" height="20" rx="1" fill="black"/>
            <rect x="28" y="14" width="4" height="20" rx="1" fill="black"/>
          </svg>`;
      currentAudioButton = btn;
    }
  }

  document.querySelectorAll('.play-audio').forEach(btn => {
    btn.addEventListener('click', e => {
      e.stopPropagation();
      handleAudioToggle(btn);
    });
  });
  audio.addEventListener('ended', () => {
    if (currentAudioButton) {
      currentAudioButton.innerHTML = `<svg width="18" height="18" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="24" cy="24" r="22" stroke="black" stroke-width="2" fill="white"/>
            <polygon points="18,14 34,24 18,34" fill="black"/>
          </svg>`;
      currentAudioButton = null;
    }
  });


  const enterExhibitBtn = document.getElementById('enterExhibitBtn');

  let isDragging = false;
  let startY = 0;
  let currentY = 0;
  const maxDrag = window.innerHeight * 0.5;

  function startHeroAnimations() {
    gsap.to(hero, { duration: 0.8, opacity: 1, ease: 'power2.out' });
    gsap.to(heroSpotlight, {
      duration: 2,
      opacity: 1,
      ease: 'power2.out',
      delay: 0.5,
    });
    gsap.to(subHeading, {
      duration: 1.2,
      opacity: 1,
      delay: 1.5,
      ease: 'power2.out',
    });
    gsap.to(artistLine, {
      duration: 1.2,
      opacity: 1,
      delay: 2.1,
      ease: 'power2.out',
    });
    gsap.to(enterExhibitBtn, {
      duration: 1.2,
      opacity: 1,
      delay: 2.5,
      ease: 'power2.out',
    });

    gsap.to(heroSpotlight, {
      duration: 3,
      repeat: -1,
      yoyo: true,
      ease: 'power1.inOut',
      scale: 1.02,
    });
    gsap.to('.bg-layer', {
      background:
        "radial-gradient(circle at center, rgba(255,255,255,0.02), rgba(0,0,0,0) 70%), linear-gradient(45deg, #070707, #090909)",
      duration: 8,
      repeat: -1,
      yoyo: true,
      ease: 'none',
    });
  }

  function playShhIntroThenHero() {
    if (!shhIntro) {
      startHeroAnimations();
      return;
    }

    gsap.set(shhIntro, { opacity: 0, y: 0, filter: 'blur(6px)', scale: 0.98 });
    const tl = gsap.timeline();
    tl.to(shhIntro, {
      opacity: 1,
      filter: 'blur(0px)',
      duration: 0.8,
      ease: 'power3.out'
    })
    .to(shhIntro, { duration: 0.6 })
    .to(shhIntro, {
      opacity: 0,
      y: -10,
      duration: 0.8,
      ease: 'power2.inOut'
    })
    .add(() => {
      if (shhIntro) shhIntro.style.display = 'none';
      startHeroAnimations();
    });
  }

  document.addEventListener('mousemove', (e) => {
    const centerX = window.innerWidth / 2;
    const centerY = window.innerHeight / 2;
    const offsetX = (e.clientX - centerX) / centerX;
    const offsetY = (e.clientY - centerY) / centerY;

    gsap.to(hero, {
      rotationY: offsetX * 2,
      rotationX: offsetY * 2,
      transformOrigin: 'center',
      duration: 0.3,
      ease: 'power2.out',
    });
  });

  document.addEventListener('mousedown', handleStart);
  document.addEventListener('mousemove', handleMove);
  document.addEventListener('mouseup', handleEnd);

  document.addEventListener('touchstart', handleStart, { passive: false });
  document.addEventListener('touchmove', handleMove, { passive: false });
  document.addEventListener('touchend', handleEnd);

  if (!deepLinked) {
    playShhIntroThenHero();
  }

  function handleStart(e) {
    if (galleryScreen.style.pointerEvents === 'auto') {
      return;
    }
    if (e.target.closest('#prevBtn, #nextBtn, #closeGalleryBtn')) {
      return;
    }
    isDragging = true;
    startY = e.type === 'mousedown' ? e.clientY : e.touches[0].clientY;
    currentY = 0;
    document.body.style.cursor = 'grabbing';
  }

  function handleMove(e) {
    if (!isDragging) return;
    const y = e.type === 'mousemove' ? e.clientY : e.touches[0].clientY;
    currentY = Math.min(startY - y, maxDrag);
    currentY = Math.max(currentY, 0);

    const progress = currentY / maxDrag;

    gsap.to(hero, { y: -currentY, duration: 0.1 });
    gsap.set(galleryScreen, {
      y: (1 - progress) * window.innerHeight * 0.5,
      opacity: progress,
    });
  }

  function handleEnd() {
    if (!isDragging) return;
    isDragging = false;
    document.body.style.cursor = 'default';

    if (currentY > maxDrag * 0.5) {
      gsap.to(hero, {
        y: -maxDrag,
        opacity: 0,
        duration: 1.2,
        ease: 'power2.inOut',
      });
      gsap.to(galleryScreen, {
        y: '-50%',
        opacity: 1,
        duration: 1.2,
        ease: 'power2.inOut',
        onComplete: () => {
          galleryScreen.style.pointerEvents = 'auto';
        },
      });
      gsap.to(mainNav, {
        opacity: 0,
        duration: 0.8,
        ease: 'power2.out'
      });
    } else {
      gsap.to(hero, {
        y: 0,
        opacity: 1,
        duration: 0.25,
        ease: 'power2.out',
      });
      gsap.to(galleryScreen, {
        y: 'calc(100vh + 50%)',
        opacity: 0,
        duration: 0.25,
        ease: 'power2.out',
        onComplete: () => {
          galleryScreen.style.pointerEvents = 'none';
        },
      });
      gsap.to(mainNav, {
        opacity: 1,
        duration: 0.25,
        ease: 'power2.out'
      });
    }
  }

  enterExhibitBtn.addEventListener('click', () => {
    gsap.to(hero, {
      y: -maxDrag,
      opacity: 0,
      duration: 1.2,
      ease: 'power2.inOut',
    });
    gsap.to(galleryScreen, {
      y: '-50%',
      opacity: 1,
      duration: 1.2,
      ease: 'power2.inOut',
      onComplete: () => {
        galleryScreen.style.pointerEvents = 'auto';
        startIndicatorTimer();
      },
    });
    gsap.to(mainNav, {
      opacity: 0,
      duration: 0.8,
      ease: 'power2.out'
    });
  });

  const slideshow = document.querySelector('.slideshow');
  const swipeHint = document.querySelector('.swipe-hint');
  let touchStartX = null;
  let touchEndX = null;
  const swipeThreshold = 50;

  if (window.innerWidth < 768) {
    setTimeout(() => {
      gsap.to(swipeHint, {
        opacity: 1,
        duration: 1,
        delay: 1,
        onComplete: () => {
          gsap.to(swipeHint, {
            opacity: 0,
            duration: 1,
            delay: 2
          });
        }
      });
    }, 100);
  }

  slideshow.addEventListener('touchstart', (e) => {
    hideTapIndicators();
    if (e.target.closest('.zoom-container') || e.target.closest('.play-audio')) {
      touchStartX = null;
      return;
    }
    
    if (document.querySelector('.slide.full-screen')) {
      touchStartX = null;
      return;
    }
    
    touchStartX = e.touches[0].clientX;
  }, { passive: true });

  slideshow.addEventListener('touchmove', (e) => {
    if (touchStartX === null) return;
    
    if (document.querySelector('.slide.full-screen')) {
      touchStartX = null;
      touchEndX = null;
      return;
    }
    
    touchEndX = e.touches[0].clientX;
  }, { passive: true });

  slideshow.addEventListener('touchend', () => {
    if (touchStartX === null) {
      return;
    }
    
    if (document.querySelector('.slide.full-screen')) {
      touchStartX = null;
      touchEndX = null;
      return;
    }
    
    const swipeDistance = touchEndX - touchStartX;
    if (Math.abs(swipeDistance) > swipeThreshold) {
      if (swipeDistance > 0) {
        currentSlide = (currentSlide - 1 + slides.length) % slides.length;
      } else {
        currentSlide = (currentSlide + 1) % slides.length;
      }
      showSlide(currentSlide);
    }
    
    touchStartX = null;
    touchEndX = null;
  });

  let lastTap = 0;
  document.addEventListener('touchend', (e) => {
    const currentTime = new Date().getTime();
    const tapLength = currentTime - lastTap;
    if (tapLength < 500 && tapLength > 0) {
      e.preventDefault();
    }
    lastTap = currentTime;
  });

  prevBtn.addEventListener('click', () => {
    hideTapIndicators();
    if (currentAudioButton && !audio.paused) {
      audio.pause();
      currentAudioButton.innerHTML = `<svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="24" cy="24" r="22" stroke="black" stroke-width="2" fill="white"/>
            <polygon points="18,14 34,24 18,34" fill="black"/>
          </svg>`;
      currentAudioButton = null;
    }
    currentSlide = (currentSlide - 1 + slides.length) % slides.length;
    showSlide(currentSlide);
  });
  nextBtn.addEventListener('click', () => {
    hideTapIndicators();
    if (currentAudioButton && !audio.paused) {
      audio.pause();
      currentAudioButton.innerHTML = `<svg width="16" height="16" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="24" cy="24" r="22" stroke="black" stroke-width="2" fill="white"/>
            <polygon points="18,14 34,24 18,34" fill="black"/>
          </svg>`;
      currentAudioButton = null;
    }
    currentSlide = (currentSlide + 1) % slides.length;
    showSlide(currentSlide);
  });

function showSlide(index) {
    slides.forEach((slide, i) => {
      slide.classList.remove('active', 'next', 'prev');
      if (i === index) {
        slide.classList.add('active');
      } else if (i === (index + 1) % slides.length) {
        slide.classList.add('next');
      } else if (i === (index - 1 + slides.length) % slides.length) {
        slide.classList.add('prev');
      }
    });

    const currentSlideEl = slides[index];
    gsap.fromTo(currentSlideEl.querySelector('img'), 
      { opacity: 0, y: 30 },
      { opacity: 1, y: 0, duration: 0.6, ease: 'power2.out' }
    );
    gsap.fromTo(currentSlideEl.querySelector('.slide-info'),
      { opacity: 0, y: 20 },
      { opacity: 1, y: 0, duration: 0.6, delay: 0.2, ease: 'power2.out' }
    );

    const nextIndex = (index + 1) % slides.length;
    const prevIndex = (index - 1 + slides.length) % slides.length;
    [prevIndex, index, nextIndex].forEach(i => {
      const img = slides[i].querySelector('img');
      if (img && !img.complete) {
        img.setAttribute('loading', 'eager');
      }
    });
}

  closeGalleryBtn.addEventListener('click', () => {
    hideTapIndicators();
    gsap.to(galleryScreen, {
      opacity: 0,
      duration: 0.3,
      ease: 'power2.out',
      onComplete: () => {
        galleryScreen.style.pointerEvents = 'none';
      },
    });
    gsap.to(hero, {
      y: 0,
      opacity: 1,
      duration: 0.3,
      ease: 'power2.out',
    });
    gsap.to(mainNav, {
      opacity: 1, 
      duration: 0.3,
      ease: 'power2.out'
    });
  });

  galleryScreen.addEventListener('click', (e) => {
    hideTapIndicators();
    if (e.target.closest('button')) {
      return;
    }
    if (e.target.closest('.zoom-container')) {
      return;
    }
    
    if (document.querySelector('.slide.full-screen')) {
      return;
    }
    
    const bottomSafeZone = 60;
    if (e.clientY > window.innerHeight - bottomSafeZone) {
      return;
    }
    const clickX = e.clientX;
    const galleryWidth = galleryScreen.offsetWidth;
    if (clickX < galleryWidth / 2) {
      currentSlide = (currentSlide - 1 + slides.length) % slides.length;
    } else {
      currentSlide = (currentSlide + 1) % slides.length;
    }
    showSlide(currentSlide);
  });

  galleryScreen.addEventListener('click', (e) => {
    hideTapIndicators();
    const bottomThreshold = window.innerHeight - 60;
    if (e.clientY > bottomThreshold) {
      gsap.to(galleryScreen, {
        y: '100%',
        opacity: 0,
        duration: 1.2,
        ease: 'power2.inOut',
        onComplete: () => {
          galleryScreen.style.pointerEvents = 'none';
          gsap.to(hero, {
            y: 0,
            opacity: 1,
            duration: 1.2,
            ease: 'power2.inOut'
          });
        }
      });
    }
  });

  const mainNav = document.querySelector('.main-nav');
  gsap.set(mainNav, {
    transition: 'opacity 0.8s ease'
  });

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      const fullScreenSlide = document.querySelector('.slide.full-screen');
      if (fullScreenSlide) {
        toggleFullScreen(fullScreenSlide);
      }
    } else if (e.key === 'ArrowRight') {
      if (nextBtn) nextBtn.click();
    } else if (e.key === 'ArrowLeft') {
      if (prevBtn) prevBtn.click();
    } else if (e.key === ' ' || e.code === 'Space') {
      if (galleryScreen.style.pointerEvents === 'auto') {
        e.preventDefault();
        const activeBtn = document.querySelector('.slide.active .play-audio');
        if (activeBtn) {
          handleAudioToggle(activeBtn);
        }
      }
    }
  });
});

// Helpers
function slugify(text) {
  return (text || '')
    .toLowerCase()
    .replace(/[^a-z0-9]+/g, '-')
    .replace(/(^-|-$)/g, '');
}

if (window.innerWidth < 768) {
  const images = document.querySelectorAll('.zoom-container img');
  
  function getDistance(touch1, touch2) {
    const dx = touch1.clientX - touch2.clientX;
    const dy = touch1.clientY - touch2.clientY;
    return Math.sqrt(dx * dx + dy * dy);
  }
  
  function getTouchCenter(touch1, touch2, img) {
    const rect = img.getBoundingClientRect();
    const centerX = (touch1.clientX + touch2.clientX) / 2;
    const centerY = (touch1.clientY + touch2.clientY) / 2;
    const percentX = ((centerX - rect.left) / rect.width) * 100;
    const percentY = ((centerY - rect.top) / rect.height) * 100;
    
    return { x: percentX, y: percentY };
  }
  
  images.forEach(img => {
    let scale = 1;
    let initialDistance = 0;
    let touchCenter = { x: 0, y: 0 };
    let translateX = 0;
    let translateY = 0;
    let isPanning = false;
    let lastTouchX = 0;
    let lastTouchY = 0;
    let touchStartTime = 0;
    
    document.addEventListener('fullscreenchange', () => {
      scale = 1;
      translateX = 0;
      translateY = 0;
      img.style.transform = 'scale(1)';
    });
    
    img.parentElement.addEventListener('touchstart', (e) => {
      const slide = img.closest('.slide');
      const isFullscreen = slide.classList.contains('full-screen');
      
      touchStartTime = Date.now();
      
      if (e.touches.length === 2) {
        e.preventDefault();
        isPanning = false;
        initialDistance = getDistance(e.touches[0], e.touches[1]);
        touchCenter = getTouchCenter(e.touches[0], e.touches[1], img);
        img.style.transformOrigin = `${touchCenter.x}% ${touchCenter.y}%`;
      } else if (e.touches.length === 1 && (scale > 1 || isFullscreen)) {
        e.preventDefault();
        isPanning = true;
        lastTouchX = e.touches[0].clientX;
        lastTouchY = e.touches[0].clientY;
      }
    });
    
    img.parentElement.addEventListener('touchmove', (e) => {
      const slide = img.closest('.slide');
      const isFullscreen = slide.classList.contains('full-screen');
      
      if (e.touches.length === 2) {
        e.preventDefault();
        const currentDistance = getDistance(e.touches[0], e.touches[1]);
        const newScale = (currentDistance / initialDistance) * scale;
        scale = Math.min(Math.max(newScale, 0.8), 3);
        
        img.style.transform = `scale(${scale}) translate(${translateX/scale}px, ${translateY/scale}px)`;
      } else if (e.touches.length === 1 && isPanning && (scale > 1 || isFullscreen)) {
        e.preventDefault();
        const deltaX = e.touches[0].clientX - lastTouchX;
        const deltaY = e.touches[0].clientY - lastTouchY;
        
        translateX += deltaX;
        translateY += deltaY;
        
        const imgRect = img.getBoundingClientRect();
        const maxTranslateX = Math.max(0, (imgRect.width * scale - window.innerWidth) / 2);
        const maxTranslateY = Math.max(0, (imgRect.height * scale - window.innerHeight) / 2);
        
        translateX = Math.min(Math.max(translateX, -maxTranslateX), maxTranslateX);
        translateY = Math.min(Math.max(translateY, -maxTranslateY), maxTranslateY);
        
        lastTouchX = e.touches[0].clientX;
        lastTouchY = e.touches[0].clientY;
        
        img.style.transform = `scale(${scale}) translate(${translateX/scale}px, ${translateY/scale}px)`;
      }
    });
    
    img.parentElement.addEventListener('touchend', (e) => {
      const slide = img.closest('.slide');
      const isFullscreen = slide.classList.contains('full-screen');
      
      if (scale < 1) {
        img.style.transition = 'transform 0.3s ease-out';
        scale = 1;
        translateX = 0;
        translateY = 0;
        img.style.transform = 'scale(1)';
        img.style.transformOrigin = 'center center';
        setTimeout(() => {
          img.style.transition = '';
        }, 300);
      }
      
      if (isFullscreen && e.touches.length === 0 && scale === 1 && 
          Math.abs(translateX) < 10 && Math.abs(translateY) < 10) {
        const quickEnd = Date.now() - touchStartTime < 300;
        if (quickEnd) {
          toggleFullScreen(slide);
        }
      }
      
      isPanning = false;
      initialDistance = 0;
    });
  });
}

document.addEventListener('DOMContentLoaded', () => {
  const slides = document.querySelectorAll('.slide');
  
  slides.forEach(slide => {
    const img = slide.querySelector('img');
    const zoomContainer = img.parentElement;
    
    let touchStartTime = 0;
    let touchStartPos = null;
    let isSingleTouch = false;
    
    zoomContainer.addEventListener('touchstart', (e) => {
      if (e.touches.length === 1) {
        isSingleTouch = true;
        touchStartTime = Date.now();
        touchStartPos = {
          x: e.touches[0].clientX,
          y: e.touches[0].clientY
        };
      } else {
        isSingleTouch = false;
      }
    }, { passive: true });
    
    zoomContainer.addEventListener('touchend', (e) => {
      if (isSingleTouch && touchStartPos && e.changedTouches.length === 1) {
        const touchEndTime = Date.now();
        const touchDuration = touchEndTime - touchStartTime;
        
        const touchEndPos = {
          x: e.changedTouches[0].clientX,
          y: e.changedTouches[0].clientY
        };
        
        const distance = Math.sqrt(
          Math.pow(touchEndPos.x - touchStartPos.x, 2) + 
          Math.pow(touchEndPos.y - touchStartPos.y, 2)
        );
        
        if (touchDuration < 300 && distance < 10) {
          e.preventDefault();
          e.stopPropagation();
          
          const isFullscreen = slide.classList.contains('full-screen');
          const currentTransform = img.style.transform;
          const isScaled = currentTransform && currentTransform !== 'scale(1)' && 
                          !currentTransform.includes('scale(1)');
          
          if (isFullscreen && !isScaled) {
            toggleFullScreen(slide);
          } else if (!isFullscreen) {
            toggleFullScreen(slide);
          }
        }
      }
      
      touchStartPos = null;
      isSingleTouch = false;
    });
    
    img.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      toggleFullScreen(slide);
    });
  });
  
  document.addEventListener('click', (e) => {
    const fullScreenSlide = document.querySelector('.slide.full-screen');
    if (!fullScreenSlide) return;
    if (!e.target.closest('.zoom-container img')) {
      toggleFullScreen(fullScreenSlide);
    }
  });

});

function toggleFullScreen(slide) {
  const img = slide.querySelector('img');
  const slideInfo = slide.querySelector('.slide-info');
  const zoomContainer = slide.querySelector('.zoom-container');
  
  if (slide.classList.contains('animating')) {
    return;
  }
  slide.classList.add('animating');
  
  if (slide.classList.contains('full-screen')) {
    
    const currentTransform = window.getComputedStyle(img).transform;
    img.classList.add('zoom-transition');
    
    gsap.to('.slide.full-screen::before', {
      opacity: 0,
      duration: 0.2
    });
    
    if (currentTransform !== 'matrix(1, 0, 0, 1, 0, 0)' && currentTransform !== 'none') {
      gsap.to(img, {
        x: 0, 
        y: 0,
        scale: 1,
        duration: 0.3,
        ease: 'power1.out',
        onComplete: collapseFullScreen
      });
    } else {
      collapseFullScreen();
    }
    
    function collapseFullScreen() {
      const rect = img.getBoundingClientRect();
      
      const tl = gsap.timeline({
        onComplete: () => {
          slide.classList.remove('full-screen', 'animating');
          document.body.classList.remove('full-screen-active');
          
          img.style.transform = '';
          img.style.width = '';
          img.style.height = '';
          img.style.boxShadow = '';
          img.style.borderRadius = '';
          
          setTimeout(() => {
            img.classList.remove('zoom-transition');
          }, 100);
        }
      });
      
      tl.to(img, {
        width: Math.min(rect.width * 0.8, window.innerWidth * 0.7) + 'px',
        height: 'auto',
        duration: 0.25,
        ease: 'power2.inOut'
      })
      .to(slideInfo, {
        opacity: 1,
        duration: 0.05,
        delay: 0.1
      }, "-=0.2")
      .to('.btn-prev, .btn-next, .btn-close-gallery', {
        opacity: 1,
        duration: 0.2
      }, "-=0.2");
    }
    
  } else {
    
    gsap.to(slideInfo, {
      opacity: 0,
      duration: 0.05,
      onComplete: () => {
        gsap.to('.btn-prev, .btn-next, .btn-close-gallery', {
          opacity: 0,
          duration: 0.1
        });
        
        const imgRect = img.getBoundingClientRect();
        const targetWidth = Math.min(window.innerWidth * 0.9, imgRect.width * 1.8);
        
        img.classList.add('zoom-transition');
        
        const tl = gsap.timeline({
          onComplete: () => {
            slide.classList.remove('animating');
            
            setTimeout(() => {
              img.classList.remove('zoom-transition');
            }, 100);
          }
        });
        
        slide.classList.add('full-screen');
        document.body.classList.add('full-screen-active');
        
        tl.to(img, {
          width: targetWidth + 'px',
          height: 'auto',
          boxShadow: '0 0 40px rgba(0, 0, 0, 0.3)',
          borderRadius: '4px',
          duration: 0.3,
          ease: 'power1.out'
        })
        .from('.slide.full-screen::before', {
          opacity: 0,
          duration: 0.3
        }, "-=0.2");
        
      }
    });
  }
}

document.addEventListener('click', (e) => {
  const fullScreenSlide = document.querySelector('.slide.full-screen');
  if (!fullScreenSlide) return;
  if (!e.target.closest('.zoom-container')) {
    toggleFullScreen(fullScreenSlide);
  }
});


document.addEventListener('DOMContentLoaded', () => {
  document.addEventListener('contextmenu', (e) => {
    if (e.target.tagName === 'IMG') {
      e.preventDefault();
      return false;
    }
  });

  let touchTimer;
  document.addEventListener('touchstart', (e) => {
    if (e.target.tagName === 'IMG') {
      touchTimer = setTimeout(() => {
        e.preventDefault();
      }, 300);
    }
  });

  document.addEventListener('touchend', () => {
    clearTimeout(touchTimer);
  });

  document.addEventListener('touchmove', () => {
    clearTimeout(touchTimer);
  });

  document.addEventListener('dragstart', (e) => {
    if (e.target.tagName === 'IMG') {
      e.preventDefault();
      return false;
    }
  });

  function addImageProtection() {
    document.querySelectorAll('.zoom-container').forEach(container => {
      if (!container.querySelector('.protection-overlay')) {
        addOverlay(container);
      }
    });

    const fullScreenSlide = document.querySelector('.slide.full-screen');
    if (fullScreenSlide) {
      const zoomContainer = fullScreenSlide.querySelector('.zoom-container');
      if (zoomContainer && !zoomContainer.querySelector('.protection-overlay')) {
        addOverlay(zoomContainer);
      }
    }
  }

  function addOverlay(container) {
    const overlay = document.createElement('div');
    overlay.className = 'protection-overlay';
    overlay.style.cssText = `
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: transparent;
      z-index: 1;
      touch-action: manipulation;
      pointer-events: auto;
    `;
    container.style.position = 'relative';
    container.appendChild(overlay);
  }

  addImageProtection();

  const observer = new MutationObserver(() => {
    addImageProtection();
  });

  observer.observe(document.body, {
    childList: true,
    subtree: true,
    attributes: true,
    attributeFilter: ['class']
  });

  document.addEventListener('touchforcechange', (e) => {
    if (e.target.tagName === 'IMG') {
      e.preventDefault();
    }
  });

  
});

</script>

</body>
</html>
